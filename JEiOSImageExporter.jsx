// ++++++++++++++++++++++// iOS Image Exporter// By Jan Eberl// ++++++++++++++++++++++#target Photoshopvar bProgress;var count = 3;var cancel = false;main();function main() {        var window = new Window("palette", "Export");    window.frameLocation = [$.screens[0].right/2, $.screens[0].top+300];    window.preferredSize = [300, 130];     var comment = window.add ("statictext",undefined, "Exporting Images ...");     comment.size = [270,20];    bProgress = window.add ("progressbar",undefined, 0);      bProgress.size = [270,20];    window.cancel = window.add ("button",undefined, "Cancel");      window.cancel.onClick = function (){          cancel=true;          window.close();    }        // Ask user for input file	var inputFile = File.openDialog("Select a PSD file representing your Image in @2x resolution","PSD File:*.psd");	if (inputFile == null) {        window.close();        return;    }        window.show();        // open    open(inputFile);    var docRef = app.activeDocument;        var dir = Folder(app.activeDocument.path);	if(!dir.exists) dir.create();        //resizing    resize(dir,'@2x',100);    setProgress (30);    resize(dir,'@3x',200);    setProgress (60);    resize(dir,null,50);    setProgress (100);        // close    app.activeDocument.close(SaveOptions.DONOTSAVECHANGES);}function resize(dir,ext,size) {    if (cancel) {        return;    }    // Setup file name    var fname;    if (ext) {       fname = app.activeDocument.name.replace(/(.*)\.(.*?)$/, "$1").toLowerCase() + ext + ".png";    } else {        fname = app.activeDocument.name.replace(/(.*)\.(.*?)$/, "$1").toLowerCase() + ".png";    }         // Set export options    var opts, file;    opts = new ExportOptionsSaveForWeb();    opts.format = SaveDocumentType.PNG;    opts.PNG8 = false;     opts.transparency = true;    opts.interlaced = 0;    opts.includeProfile = false;    opts.optimized = true;     // Duplicate, resize and export    var tempfile = app.activeDocument.duplicate();    tempfile.resizeImage(size+"%",size+"%");    file = new File(dir+"/"+fname);    tempfile.exportDocument(file, ExportType.SAVEFORWEB, opts);    tempfile.close(SaveOptions.DONOTSAVECHANGES);}function setProgress(prog) {    // set value of progressbar    bProgress.value = prog;}